!function(a){"use strict";function b(){if(i){i.setAttribute("height","");var a=l.height||l.documentElement.scrollHeight,b=a&&a>0?a:"100%";i.setAttribute("height",b)}}function c(){i&&m.removeChild(i),i=l.createElement("iframe"),i.setAttribute("width","100%"),"string"==typeof k&&i.setAttribute("sandbox",k),b(),m.appendChild(i)}function d(a){c(),i.addEventListener("load",function(){e("load",null)},!1);var b=i.contentWindow.document;b.open(),b.write(a),b.close()}function e(b,c){var d=n.stringify({data:c,type:b,secret:j});a.parent.postMessage(d,"*")}function f(a,b){var c=i.contentWindow.Error;(a&&a instanceof Error||a instanceof c)&&(a={message:a.message,stack:a.stack,type:a.type,arguments:a.arguments,__errorType__:String(a.constructor).trim().match(/^function ([^\(\s]+)/)[1]}),"function"==typeof b&&(b=String(b)),e("evaljs",{error:a,result:b})}function g(a){var b=null;try{b=i.contentWindow.eval(a)}catch(c){throw f(c,null),c}f(null,b)}function h(){e("html",i.contentWindow.document.documentElement.outerHTML)}var i,j,k,l=a.document,m=l.querySelector("body"),n=a.JSON,o={load:d,evaljs:g,html:h};a.addEventListener("message",function(a){var b;try{b=n.parse(a.data)}catch(c){return}var d=b.type,e=b.data;if(b.secret)if(j||"handshake"!==b.type){if(b.secret!==j)return;o[d](e)}else j=b.secret,k=b.data},!1),a.addEventListener("resize",b),a.stuffEmit=function(a,b){e("custom",{type:a,data:b})}}(window);